<!DOCTYPE html>
<html>
    <head>
        <title>WebSD | Home</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
              integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
              crossorigin="anonymous">
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="/web-stable-diffusion/assets/css/main.css">
        <link rel="stylesheet" href="/web-stable-diffusion/assets/css/group.css">
        <!-- <link rel="stylesheet" href="/web-stable-diffusion/css/table.css">          -->
        <link rel="shortcut icon" href="/web-stable-diffusion/assets/img/logo/mlc-favicon.png">
        <meta http-equiv="origin-trial" content="Agx76XA0ITxMPF0Z8rbbcMllwuxsyp9qdtQaXlLqu1JUrdHB6FPonuyIKJ3CsBREUkeioJck4nn3KO0c0kkwqAMAAABJeyJvcmlnaW4iOiJodHRwOi8vbG9jYWxob3N0Ojg4ODgiLCJmZWF0dXJlIjoiV2ViR1BVIiwiZXhwaXJ5IjoxNjkxNzExOTk5fQ==">
<meta http-equiv="origin-trial" content="AnmwqQ1dtYDQTYkZ5iMtHdINCaxjE94uWQBKp2yOz1wPTcjSRtOHUGQG+r2BxsEuM0qhxTVnuTjyh31HgTeA8gsAAABZeyJvcmlnaW4iOiJodHRwczovL21sYy5haTo0NDMiLCJmZWF0dXJlIjoiV2ViR1BVIiwiZXhwaXJ5IjoxNjkxNzExOTk5LCJpc1N1YmRvbWFpbiI6dHJ1ZX0=">
    </head>
    <body>
        <div class="container">
            <!-- This is a bit nasty, but it basically says be a column first, and on larger screens be a spaced out row -->
            <div class="header d-flex
                        flex-column
                        flex-md-row justify-content-md-between">
              <a href="/" id="navtitle">
                  <img src="/web-stable-diffusion/assets/img/logo/mlc-logo-with-text-landscape.svg" height="70px"
                       alt="MLC" id="logo">
              </a>
              <ul id="topbar" class="nav nav-pills justify-content-center">
                    
                    

                        

                        
                        
                        

                      <li class="nav-item">
                         
                            <a class="nav-link active"
                               href="/web-stable-diffusion/">
                                Home
                            </a>
                         
                        </li>

                    

                        

                        
                        
                        

                      <li class="nav-item">
                         
                            <a class="nav-link "
                               href="https://github.com/mlc-ai/web-stable-diffusion">
                                Github
                            </a>
                         
                        </li>

                    

                </ul>
            </div>

            

            
            <!-- Schedule  -->
            
                <h1 id="web-stable-diffusion">Web Stable Diffusion</h1>

<p>This is the demo of bringing <a href="https://huggingface.co/runwayml/stable-diffusion-v1-5">Runway’s stable diffusion models v1-5</a> to web browsers. Everything runs inside the browser with no server support.</p>

<h2 id="use-guideline">Use Guideline</h2>

<p>If you have a Mac computer with Apple silicon, here are the instructions for you to run stable diffusion on your browser locally:</p>

<ul>
  <li>Install <a href="https://www.google.com/chrome/canary/">Chrome Canary</a>, a developer version of Chrome that enables WebGPU.</li>
  <li><strong>(Recommended)</strong> Launch Chrome from terminal with the following command:
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/Applications/Google<span class="se">\ </span>Chrome<span class="se">\ </span>Canary.app/Contents/MacOS/Google<span class="se">\ </span>Chrome<span class="se">\ </span>Canary <span class="nt">--enable-dawn-features</span><span class="o">=</span>disable_robustness <span class="nt">--disable-gpu-sandbox</span>
</code></pre></div>    </div>
    <p>This command turns off the robustness check from Chrome Canary that slows down image generation to times. It is not necessary, but we strongly recommend you to start Chrome with this command.</p>
  </li>
  <li>Enter your prompt, click “Generate” – we are ready to go! The image generation will start after downloading and fetching the model parameters to local cache. The download may take a few minutes, only for the first run.</li>
  <li>Feel free to enter different prompts as well as negative prompts to generate the image you want.</li>
  <li>We provide an option to render images for the intermediate steps of UNet stage. Select “Run VAE every two UNet steps after step 10” for “Render intermediate steps” and click “Generate” again, and you will see how an image gets generated along the process.</li>
</ul>

<h2 id="disclaimer">Disclaimer</h2>

<p>This demo site is for research purpose only. Please make sure to conform to the <a href="https://huggingface.co/runwayml/stable-diffusion-v1-5#uses">uses of stable diffusion models</a>.</p>

<hr />

<script src="dist/tvmjs_runtime.wasi.js"></script>

<script src="dist/tvmjs.bundle.js"></script>

<script>
  var tvmjsGlobalEnv = tvmjsGlobalEnv || {};
</script>

<script type="module">
  import init, { TokenizerWasm } from "./dist/tokenizers-wasm/tokenizers_wasm.js";

  var initialized = false;
  async function getTokenizer(name) {
    if (!initialized) {
      await init();
    }
    const jsonText = await (await fetch("https://huggingface.co/" + name + "/raw/main/tokenizer.json")).text();
    return new TokenizerWasm(jsonText);
  }

  tvmjsGlobalEnv.getTokenizer = getTokenizer;
</script>

<script src="dist/stable_diffusion.js"></script>

<h2> Image Generation Demo </h2>
<div>
  Input Prompt <input name="inputPrompt" id="inputPrompt" type="text" value="A photo of an astronaut riding a horse on mars" size="77" /> <br />
  Negative Prompt(can be left empty) <input name="negativePrompt" id="negativePrompt" type="text" value="" size="77" />
</div>

<div>
  Render intermediate steps (can show down execution) -
  <select name="vae-cycle" id="vaeCycle">
    <option value="-1">no</option>
    <option value="2">run vae every two unet steps after step 10</option>
  </select>

  <div id="progress">
    <label id="gpu-tracker-label"></label><br />
    <label id="progress-tracker-label"></label><br />
    <progress id="progress-tracker-progress" max="100" value="100"> </progress>
  </div>
  <button onclick="tvmjsGlobalEnv.asyncOnGenerate()">Generate</button>
</div>

<div>
<canvas id="canvas" width="512" height="512"></canvas>
</div>
<div id="log"></div>


            
        </div> <!-- /container -->

        <!-- Support retina images. -->
        <script type="text/javascript"
                src="/web-stable-diffusion/assets/js/srcset-polyfill.js"></script>
    </body>

</html>
